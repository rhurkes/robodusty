(function(e){e.fn.tinyMenu=function(t,n){function r(t,n){var i=e("<div/>",{id:t.id,text:t.id,"class":"tm-btn"}).data("parent",n).data("info",t.info);if(t.children!=null){e(i).data("isparent",true);e.each(t.children,function(){r(this,t.id)})}e("#tm-box").append(i)}function i(t){s.each(function(n,r){e(r).data("parent")==t?e(r).show():e(r).hide()});t===undefined?o.hide():o.show()}e(this).append(e("<div/>",{id:"tm-back","class":"tm-btn",text:"Back"}));e(this).append(e("<div/>",{id:"tm-box"}));e.each(t.menu,function(){r(this)});var s=e("#tm-box div");var o=e("#tm-back");var u=[];s.each(function(t,n){if(e(n).data("parent")==undefined){e(n).show()}});s.click(function(){var t=e(this);if(t.data().isparent){u.push(t.data("parent"));i(this.id)}else{n(t.data())}});o.click(function(){i(u.pop())});return this}})(jQuery)